import{d as e,S as a,c as t,b as l}from"./index.43ac6aad.js";import{e as n,o as s,h as u,l as o,d as i,r,w as c,t as v}from"./vendor.c8bf7c27.js";import{u as f,d}from"./file-manager.9a2fdd9a.js";var m=n({props:{message:{type:String,default:"Delete?"},icon:{type:String,default:"delete"},text:{type:String,default:""}},emits:["confirm"],setup:(e,{emit:a})=>({confirm:function(){window.confirm(e.message)&&a("confirm")}})});m.render=function(a,t,l,n,o,i){const r=e;return s(),u(r,{class:{"highlight-font-alert":"delete"===a.icon},icon:a.icon,text:a.text,onClick:a.confirm},null,8,["class","icon","text","onClick"])};const p=o.createInstance({name:"editor"}),g=new a(p),w=i((()=>g.updateOf(x.value))),h=i((()=>S.value&&w.value&&w.value<t.updateOf(x.value))),S=r();c(S,(()=>p.setItem("lect",v(S.value)).then((()=>j()))));const y=r();let O;const x=i((()=>{let e=b.value.filename+".json";return b.value.global||(e=(v(S.value)||"_")+"/"+e),e}));function I(){p.setItem(x.value,v(y.value)),g.update(x.value)}const b=r({default:void 0,filename:""});async function J(e){var a;null==O||O(),O=void 0,y.value=void 0,b.value=e,void 0===S.value?S.value=null!=(a=await p.getItem("lect"))?a:"":await j()}function N(){const e=new URLSearchParams({path:x.value,message:window.prompt("Enter optional comment:",x.value)});fetch("http://localhost:5001/avzag-languages/us-central1/pr?"+e,{method:"POST",body:JSON.stringify(y.value,null,2)}).then((e=>alert(e.ok?"Pull request was created.":"Error.")))}async function j(e=!0){let a;null==O||O(),O=void 0,console.log("resetting",x.value),e&&(a=await p.getItem(x.value))?(y.value=a,await l(x.value)):((a=await l(x.value))?y.value=a:y.value=JSON.parse(JSON.stringify(b.value.default)),g.delete(x.value),await p.removeItem(x.value)),O||(O=c(y,I,{deep:!0}))}function k(){f((e=>y.value=JSON.parse(e)))}function P(){d(JSON.stringify(y.value,null,2),x.value)}export{m as _,h as a,J as b,b as c,P as d,y as f,w as i,S as l,N as p,j as r,p as s,k as u};

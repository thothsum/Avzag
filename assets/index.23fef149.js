import{d as e,p as l,f as s,g as t}from"./index.327f15ff.js";import{e as a,d as r,w as n,o,h as u,n as c,F as d,z as i,k as p,i as m,A as f,r as v,x as y,y as h,j as g}from"./vendor.c8bf7c27.js";import{E as b,_ as k}from"./types.a423ec07.js";import{_ as x}from"./TableEntry.6c130267.js";import{_ as j}from"./Flag.f8e3f9e0.js";import{_ as w}from"./Seeker.7110ab0c.js";import{_ as V}from"./index.cbab1530.js";import{p as Q}from"./audio-player.5db65ead.js";var T=a({props:{modelValue:{type:Object,default:void 0},labels:{type:Array,default:()=>[]}},emits:["update:modelValue"],setup(e,{emit:l}){const s=r({get:()=>e.modelValue,set:e=>l("update:modelValue",e)});const t=r((()=>e.labels.length>1)),a=r((()=>Object.fromEntries(Object.entries(s.value).map((([e,l])=>[e,l?"highlight-confirm":"highlight-alert"]))))),o=r((()=>1===e.labels.length?{[e.labels[0]]:!0}:{}));return n(e.labels,(()=>s.value=o.value),{immediate:!0}),{query:s,highlights:a,visible:t,toggle:function(e){e in s.value?s.value[e]?s.value[e]=!1:delete s.value[e]:s.value[e]=!0}}}});const _={key:0,class:"row scroll small"};T.render=function(l,s,t,a,r,n){const m=e;return l.visible?(o(),u("div",_,[c(m,{class:"round",icon:"clear",onClick:s[1]||(s[1]=e=>l.query={})}),(o(!0),u(d,null,i(l.labels,(e=>(o(),u(m,{key:e,text:e,class:["round",l.highlights[e]],onClick:s=>l.toggle(e)},null,8,["text","class","onClick"])))),128))])):p("",!0)};var O=a({components:{TableEntry:x},props:{modelValue:{type:Object,default:void 0},phonemes:{type:Array,default:()=>[]},filter:{type:String,default:""},lectQuery:{type:Object,default:()=>({})},featureQuery:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(e,{emit:l}){const s=r({get:()=>e.modelValue,set:e=>l("update:modelValue",e)}),t=r((()=>e.filter?e.phonemes.filter((({tags:l})=>null==l?void 0:l.includes(e.filter))):e.phonemes)),a=r((()=>t.value.map((({lects:l,tags:s})=>b(Object.keys(l),e.lectQuery)&&b(s,e.featureQuery))))),n=r((()=>{const l=Object.entries(e.lectQuery).filter((([,e])=>e)).map((([e])=>e));return 1===l.length?l[0]:""})),o=r((()=>n.value?t.value.map((({lects:e})=>{var l,s,t;return null==(t=null==(s=null==(l=e[n.value])?void 0:l.samples)?void 0:s[0])?void 0:t.grapheme})):[]));return{narrow:r((()=>t.value.length<=12)),graphemes:o,fitting:a,selected:s,filtered:t}}});const C=f()(((e,l,s,t,a,r)=>{const n=m("TableEntry");return o(),u("div",{id:"root",class:[{narrow:e.narrow},"row scroll wrap"]},[(o(!0),u(d,null,i(e.filtered,((l,s)=>(o(),u(n,{key:s,faded:!e.fitting[s],ipa:l.ipa,str:e.graphemes[s],selected:e.selected==l,onClick:s=>e.selected=l},null,8,["faded","ipa","str","selected","onClick"])))),128))],2)}));O.render=C,O.__scopeId="data-v-7f81c984";var q=a({props:{lect:{type:String,default:""},use:{type:Object,default:()=>({})}},setup(e){const l=r((()=>{var l;const s=new Set(null==(l=e.use.samples)?void 0:l.map((({grapheme:e})=>e)));return s.delete(void 0),s})),s=r((()=>{var l,s;return null!=(s=null==(l=e.use.samples)?void 0:l.filter((({word:e,ipa:l})=>e||l)))?s:[]}));function t(e,l){return e.includes("^")?e:e.replaceAll(l,`^${l}^`)}const a=r((()=>{var e;return null==(e=s.value)?void 0:e.map((({word:e,grapheme:l})=>t(null!=e?e:"",null!=l?l:"")))})),o=r((()=>{var l;return null==(l=s.value)?void 0:l.map((({ipa:l})=>t(null!=l?l:"",e.use.phoneme)))})),u=v([]);const c=v([]);return n(u,(()=>Q.canPlay(c,e.lect,u.value.map((([e,l])=>null!=e?e:l)).map((e=>e?"phonology/"+e:e)))),{immediate:!0,deep:!0}),{player:Q,urls:c,ipas:o,words:a,fullSamples:s,graphemes:l,setTexts:function(e,l,s){u.value[e]||(u.value[e]=[]),u.value[e][l]=s}}}});const S=f();y("data-v-6afed438");const E={class:"col-1 card flag small"},U={class:"title row-0"},A={class:"flex"},I={class:"col"};h();const P=S(((l,s,t,a,r,n)=>{const p=j,m=w,f=e,v=V;return o(),u("div",E,[c(p,{lect:l.lect,class:"blur"},null,8,["lect"]),c("div",U,[c("h2",A,g(l.lect),1),(o(!0),u(d,null,i(l.graphemes,(e=>(o(),u("p",{key:e,class:"text-dot"},g(e),1)))),128))]),c("div",I,[(o(!0),u(d,null,i(l.fullSamples,((e,s)=>{var t;return o(),u("div",{key:s,class:"row-1 flex seeker"},[c(m,{check:l.urls[s]===l.player.key,seek:null==(t=l.player.current)?void 0:t.seek},null,8,["check","seek"]),c(f,{disabled:!l.urls[s],"is-on":l.urls[s]===l.player.key,icon:"play_arrow",onClick:e=>l.player.play(null,[l.urls[s]])},null,8,["disabled","is-on","onClick"]),c(v,{class:"word flex",notes:[l.words[s]],onTexts:e=>l.setTexts(s,0,e[0])},null,8,["notes","onTexts"]),c(v,{class:"text-ipa",notes:[l.ipas[s]],onTexts:e=>l.setTexts(s,1,e[0])},null,8,["notes","onTexts"])])})),128))]),c(v,{class:"text-caption",notes:l.use.notes},null,8,["notes"])])}));q.render=P,q.__scopeId="data-v-6afed438";var F=a({components:{Table:O,PhonemeUse:q},setup(){const e=v({}),a=v({});return{phonemes:l,phoneme:s,lects:t,categories:["vowel","consonant"],lectQuery:e,featureQuery:a}}});const z=f();y("data-v-becd4f7e");const $={class:"section"},B={class:"col-1 scroll"},D={key:0,class:"col-1"},G={class:"header"},H={class:"text-ipa"},J=c("span",null,"Â ",-1),K={class:"text-tags"};h();const L=z(((e,l,s,t,a,r)=>{const n=T,f=k,v=m("Table"),y=m("PhonemeUse");return o(),u("div",$,[c("div",B,[c(n,{modelValue:e.lectQuery,"onUpdate:modelValue":l[1]||(l[1]=l=>e.lectQuery=l),labels:e.lects},null,8,["modelValue","labels"]),c(f,{modelValue:e.featureQuery,"onUpdate:modelValue":l[2]||(l[2]=l=>e.featureQuery=l),placeholder:"Query phonemes, e.g. voiced -velar..."},null,8,["modelValue"]),(o(!0),u(d,null,i(e.categories,(s=>(o(),u("div",{key:s,class:"col"},[c("h2",null,g(s+"s"),1),c(v,{modelValue:e.phoneme,"onUpdate:modelValue":l[3]||(l[3]=l=>e.phoneme=l),filter:s,"feature-query":e.featureQuery,"lect-query":e.lectQuery,phonemes:e.phonemes},null,8,["modelValue","filter","feature-query","lect-query","phonemes"])])))),128))]),e.phoneme?(o(),u("div",D,[c("div",G,[c("h1",H,g(e.phoneme.ipa),1),J,c("span",K,g(e.phoneme.tags),1)]),(o(!0),u(d,null,i(e.phoneme.lects,((e,l)=>(o(),u(y,{key:l,lect:l,use:e},null,8,["lect","use"])))),128))])):p("",!0)])}));F.render=L,F.__scopeId="data-v-becd4f7e";export default F;
